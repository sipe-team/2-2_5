# 7장 컬렉션 : 중첩을 제거하는 구조화 테크닉

## 7.1 이미 존재하는 기능을 다시 구현하지 말기

- 아래 코드를 보면 for문과 if문을 중첩으로 사용하여 가독성이 매우 떨어진다.

``` java
boolean hasPrisonKey = false;

for (Item each : items) {
    if (each.name.equals("감옥열쇠")) {
        hasPrisonKey = true;
        break;
    }
}
```

- 이 코드는 Java 8이후 등장한 stream()을 사용하여 처리하면 간단하게 수정할 수 있다.
- `anyMatch()`는 자바 표준 라이브러리에 있는 컬렉션 전용 라이브러리이다.

``` java
boolean hasPrisonKey = iteams.stream().anyMatch(
    item -> item.name.equals("감옥열쇠")
)
```

## 7.2 반복 처리 내부의 조건 분기 중첩

- 컬렉션 내부에서 특정 조건을 만족시키는 조건에 대해서 처리하고 싶은 경우가 발생한다.
- 이런 경우 반복문과 조건문을 중첩으로 사용하여 처리를 하게 되는데, 이런 경우 가독성에 매우 좋지 않다.

``` java
for (Iteam item : items) {
    if (??) {
        ....
    }
}
```

### 7.2.1 조건 continue로 조건 분기 중첩 제거하기

- continue는 실행하고 있는 처리를 건너 뛰고 다음 반복으로 넘어가게 하는 제어 구문이다.
- continue을 응용해서 사용하여 '조건에 만족하지 않는 경우 return으로 함수를 종료한다'라는 기법도 있다.

### 7.2.2 조기 브레이크로 중첩 제거하기

- 반복 처리 제어 구문에는 break도 있다.
- break는 처리 를 중단하고 반복문 전체를 벗어나는 제어 구문이다.

## 7.3 응집도가 낮은 컬렉션 처리

### 7.3.1 컬렉션 처리를 캡슐화하기

- 컬렉션과 관련되어 응집도가 낮아지는 문제는 일급 컬렉션 패턴을 사용해 해결할 수 있다.
- 일급 컬랙션 : 컬렉션과 관련된 로직을 캡술화 하는 디자인 패턴
  - 클래스에는 아래 항목이 있어야한다.
    - 인스턴스 변수
    - 인스턴스 변수에 잘못된 값이 할당되지 않게 막고, 정상적으로 조작하는 메서드

### 7.3.2 외부로 전달할 때 컬렉션의 변경 막기

- 외부로 전달할 때는 컬렉션의 요소를 변경하지 못하게 막아 두는것이 좋다.
